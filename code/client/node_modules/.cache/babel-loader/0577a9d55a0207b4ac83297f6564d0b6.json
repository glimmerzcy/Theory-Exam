{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\n\nvar _class,\n    _jsxFileName = \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\src\\\\pages\\\\EditPaper\\\\EditPaper.jsx\",\n    _class3;\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport './EditPaper.css';\nimport '../../utils/InnerWindow/InnerWindow';\nimport Store from '../../utils/Store';\nimport Editer from '../../components/EditCard';\nimport { func_icon } from '../../config/page/EditPaper';\nimport ConfigModel from '../../components/PaperConfig/index';\nimport Time from '../../utils/Time';\n\nvar GM = observer(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(GM, _React$Component);\n\n  function GM(props) {\n    var _this;\n\n    _classCallCheck(this, GM);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GM).call(this, props));\n\n    _this.setClass = function (key) {\n      return {\n        onChange: _this.onInput(key),\n        value: _this.state[_this.props.index][key],\n        min: 1,\n        type: 'number'\n      };\n    };\n\n    _this.onInput = function (key) {\n      return function (e) {\n        if (_this.state[_this.props.index][key] !== e.target.value) {\n          var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n              state = _assertThisInitialize.state;\n\n          state[_this.props.index][key] = e.target.value;\n\n          _this.setState(state);\n        }\n      };\n    };\n\n    _this.close = function () {\n      _this.state[_this.props.index] = _objectSpread({}, Store.infoList.paper.body[_this.props.index].config);\n\n      _this.setState(_this.state);\n\n      window.closeIW();\n    };\n\n    _this.submit = function () {\n      Store.infoList.paper.body[_this.props.index].config = _objectSpread({}, _this.state[_this.props.index]);\n      calculateScore();\n      window.closeIW();\n    };\n\n    if (!_this.state) _this.state = {};\n    _this.state[_this.props.index] = _objectSpread({}, Store.infoList.paper.body[_this.props.index].config);\n    return _this;\n  }\n\n  _createClass(GM, [{\n    key: \"render\",\n    value: function render() {\n      var _Store$infoList$paper = Store.infoList.paper.body[this.props.index].config,\n          subtitle = _Store$infoList$paper.subtitle,\n          type = _Store$infoList$paper.type;\n      return React.createElement(\"div\", {\n        className: \"column aside ep-im-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"row aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"\\u6807\\u9898\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"\\u5206\\u503C\")), React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: subtitle,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), React.createElement(\"input\", Object.assign({}, this.setClass('point'), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"\\u9898\\u76EE\\u7C7B\\u578B\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"\\u51FA\\u9898\\u6570\\u91CF\")), React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        value: type,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"sc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"\\u5355\\u9009\"), React.createElement(\"option\", {\n        value: \"mc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"\\u591A\\u9009\")), React.createElement(\"input\", Object.assign({}, this.setClass('num'), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })))), React.createElement(\"p\", {\n        className: \"row around\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"iw-bn iw-confirm\",\n        onClick: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"\\u786E\\u5B9A\"), React.createElement(\"div\", {\n        className: \"iw-bn iw-cancel\",\n        onClick: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\")));\n    }\n  }]);\n\n  return GM;\n}(React.Component)) || _class;\n\nexport var GroupModel = GM;\nvar calculateScore;\n\nvar EditPaper = observer(_class3 =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(EditPaper, _React$Component2);\n\n  function EditPaper(props) {\n    var _this2;\n\n    _classCallCheck(this, EditPaper);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(EditPaper).call(this, props));\n    _this2.add =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var paper, group;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              paper = Store.infoList.paper, group = _this2.state.group;\n              paper.section(group).add();\n              _context.next = 4;\n              return Time.sleep(10);\n\n            case 4:\n              document.querySelector('.ep-add-quiz').scrollIntoView({\n                inline: 'end',\n                behavior: 'smooth'\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this2.upload =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              window.showModal({\n                view: React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 112\n                  },\n                  __self: this\n                }, \"\\u786E\\u8BA4\\u5BFC\\u5165\"), React.createElement(\"p\", {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 113\n                  },\n                  __self: this\n                }, \"\\u5BFC\\u5165\\u5185\\u5BB9\\u5C06\\u8986\\u76D6\\u73B0\\u6709\\u5185\\u5BB9\")),\n                onConfirm: Store.request('excel/loadin', function () {\n                  return _this2.fileSelector.current.files[0];\n                })\n              });\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    _this2.state = {\n      group: 0,\n      score: 2\n    };\n\n    calculateScore = function calculateScore() {\n      var score = _this2.state.score,\n          current = Store.infoList.paper.calculateScore();\n      score !== current && _this2.setState({\n        score: current\n      });\n    };\n\n    _this2.fileSelector = React.createRef();\n    return _this2;\n  }\n\n  _createClass(EditPaper, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      calculateScore();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      calculateScore();\n      var paper = Store.infoList.paper,\n          head = paper.head,\n          body = paper.body;\n      var _this$state = this.state,\n          group = _this$state.group,\n          score = _this$state.score,\n          targets = paper.section(group).quesions().filter(function (q) {\n        return q.is_exist;\n      }),\n          editers = targets.map(function (q, i) {\n        return React.createElement(Editer, {\n          question: q,\n          section: paper.section(group),\n          id: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"row aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ep-l\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ep-quiz-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return window.showView(React.createElement(ConfigModel, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"\\u9898\\u7EC4\\u7F16\\u8F91\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"\\u5F53\\u524D\\u5206\\u6570:\", score))), body.map(function (content, i) {\n        return React.createElement(\"div\", {\n          key: \"eqc-\".concat(i),\n          className: group === i ? 'pointer column ep-quiz-card ep-quiz-card-ed' : 'pointer column ep-quiz-card',\n          onClick: function onClick() {\n            return _this3.setState({\n              group: i\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ep-quiz-card-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, content.config.subtitle), React.createElement(\"div\", {\n          className: \"ep-quiz-card-edit\",\n          onClick: function onClick() {\n            return window.showToast('无权编辑');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"\\u7F16\\u8F91\\u9898\\u7EC4\"));\n      }), React.createElement(\"div\", {\n        className: \"ep-quiz-card\",\n        onClick: function onClick() {\n          return window.showToast('无权编辑');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../../assets/add-bright.png'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"ep-r\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"\\u8BD5\\u5377\\u9898\\u76EE\\uFF1A\", head.title), React.createElement(\"div\", {\n        className: \"ep-func-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, func_icon.map(function (item) {\n        return React.createElement(\"img\", Object.assign({\n          className: 'pointer',\n          key: item.icon,\n          onClick: item.click,\n          src: require(\"../../assets/\".concat(item.icon, \".png\")),\n          alt: item.alt,\n          title: item.title\n        }, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }));\n      }))), React.createElement(\"div\", {\n        className: \"ep-paper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"file-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"responsive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"\\u5BFC\\u5165\\u6587\\u4EF6\", React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        ref: this.fileSelector,\n        multiple: false,\n        accept: \".xls,.xlsx\",\n        onChange: this.upload,\n        onClick: function onClick(e) {\n          return e.target.value = null;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"responsive\",\n        onClick: Store.request('excel/loadout'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"\\u5BFC\\u51FA\\u6587\\u4EF6\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, editers, React.createElement(\"div\", {\n        title: \"\\u6DFB\\u52A0\\u4E00\\u9053\\u65B0\\u9898\\u76EE\",\n        className: \"responsive ep-add-quiz\",\n        onClick: this.add,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../../assets/add-char.png'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return EditPaper;\n}(React.Component)) || _class3;\n\nexport default EditPaper;","map":{"version":3,"sources":["C:\\Users\\sunli\\Documents\\GitHub\\Theory-Exam\\code\\client\\src\\pages\\EditPaper\\EditPaper.jsx"],"names":["React","observer","Store","Editer","func_icon","ConfigModel","Time","GM","props","setClass","key","onChange","onInput","value","state","index","min","type","e","target","setState","close","infoList","paper","body","config","window","closeIW","submit","calculateScore","subtitle","Component","GroupModel","EditPaper","add","group","section","sleep","document","querySelector","scrollIntoView","inline","behavior","upload","showModal","view","onConfirm","request","fileSelector","current","files","score","createRef","head","targets","quesions","filter","q","is_exist","editers","map","i","showView","content","showToast","require","title","item","className","icon","onClick","click","src","alt"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { observer } from 'mobx-react'\r\n\r\nimport './EditPaper.css'\r\nimport '../../utils/InnerWindow/InnerWindow'\r\nimport Store from '../../utils/Store'\r\n\r\nimport Editer from '../../components/EditCard'\r\nimport { func_icon } from '../../config/page/EditPaper'\r\nimport ConfigModel from '../../components/PaperConfig/index'\r\nimport Time from '../../utils/Time'\r\n\r\n@observer\r\nclass GM extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    if (!this.state)\r\n      this.state = {}\r\n    this.state[this.props.index] = { ...Store.infoList.paper.body[this.props.index].config };\r\n  }\r\n  setClass = key => {\r\n    return {\r\n      onChange: this.onInput(key),\r\n      value: this.state[this.props.index][key],\r\n      min: 1,\r\n      type: 'number'\r\n    }\r\n  }\r\n  onInput = key => {\r\n    return e => {\r\n      if (this.state[this.props.index][key] !== e.target.value) {\r\n        let { state } = this\r\n        state[this.props.index][key] = e.target.value\r\n        this.setState(state)\r\n      }\r\n    }\r\n  }\r\n  close = () => {\r\n    this.state[this.props.index] = { ...Store.infoList.paper.body[this.props.index].config }\r\n    this.setState(this.state)\r\n    window.closeIW()\r\n  }\r\n  submit = () => {\r\n    Store.infoList.paper.body[this.props.index].config = { ...this.state[this.props.index] }\r\n    calculateScore()\r\n    window.closeIW()\r\n  }\r\n  render() {\r\n    let { subtitle, type } = Store.infoList.paper.body[this.props.index].config\r\n    return (\r\n      <div className='column aside ep-im-container'>\r\n        <p className='row aside'>\r\n          <div className='column aside'>\r\n            <div>标题</div>\r\n            <div>分值</div>\r\n          </div>\r\n          <div className='column aside'>\r\n            <input value={subtitle} disabled />\r\n            <input {...this.setClass('point')} />\r\n          </div>\r\n          <div className='column aside'>\r\n            <div>题目类型</div>\r\n            <div>出题数量</div>\r\n          </div>\r\n          <div className='column aside'>\r\n            <select value={type} disabled>\r\n              <option value='sc'>单选</option>\r\n              <option value='mc'>多选</option>\r\n            </select>\r\n            <input {...this.setClass('num')} />\r\n          </div>\r\n        </p>\r\n        <p className='row around'>\r\n          <div className='iw-bn iw-confirm' onClick={this.submit}>确定</div>\r\n          <div className='iw-bn iw-cancel' onClick={this.close}>取消</div>\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport const GroupModel = GM\r\n\r\nlet calculateScore\r\n\r\n@observer\r\nclass EditPaper extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      group: 0,\r\n      score: 2\r\n    }\r\n    calculateScore = () => {\r\n      let { score } = this.state, current = Store.infoList.paper.calculateScore()\r\n      score !== current && this.setState({ score: current })\r\n    }\r\n    this.fileSelector = React.createRef()\r\n  }\r\n  componentWillMount() {\r\n    calculateScore()\r\n  }\r\n  add = async () => {\r\n    const { paper } = Store.infoList, { group } = this.state\r\n    paper.section(group).add()\r\n    await Time.sleep(10)\r\n    document.querySelector('.ep-add-quiz').scrollIntoView({ inline: 'end', behavior: 'smooth' })\r\n  }\r\n  upload = async () => {\r\n    window.showModal({\r\n      view: <>\r\n        <h2>确认导入</h2>\r\n        <p>导入内容将覆盖现有内容</p>\r\n      </>,\r\n      onConfirm: Store.request('excel/loadin', () => this.fileSelector.current.files[0])\r\n    })\r\n  }\r\n  render() {\r\n    calculateScore()\r\n    const { paper } = Store.infoList, { head, body } = paper\r\n    let { group, score } = this.state,\r\n      targets = paper.section(group).quesions().filter(q => q.is_exist),\r\n      editers = targets.map((q, i) => <Editer question={q} section={paper.section(group)} id={i} />)\r\n    return (\r\n      <div className='row aside'>\r\n        <div className='ep-l'>\r\n          <div className='ep-quiz-card'>\r\n            <div onClick={() => window.showView(<ConfigModel />)}>\r\n              <div className='pointer'>题组编辑</div>\r\n              <div>当前分数:{score}</div>\r\n            </div>\r\n          </div>\r\n          {\r\n            body.map((content, i) =>\r\n              <div key={`eqc-${i}`} className={group === i ? 'pointer column ep-quiz-card ep-quiz-card-ed' : 'pointer column ep-quiz-card'} onClick={() => this.setState({ group: i })}>\r\n                <div className='ep-quiz-card-text'>{content.config.subtitle}</div>\r\n                <div className='ep-quiz-card-edit' onClick={() => window.showToast('无权编辑')}>编辑题组</div>\r\n              </div>\r\n            )\r\n          }\r\n          <div className='ep-quiz-card' onClick={() => window.showToast('无权编辑')}>\r\n            <img src={require('../../assets/add-bright.png')} />\r\n          </div>\r\n        </div>\r\n        <div className='ep-r'>\r\n          <div className='row aside'>\r\n            <div>试卷题目：{head.title}</div>\r\n            <div className='ep-func-bar'>\r\n              {\r\n                func_icon.map(item =>\r\n                  <img {...\r\n                    {\r\n                      className: 'pointer',\r\n                      key: item.icon,\r\n                      onClick: item.click,\r\n                      src: require(`../../assets/${item.icon}.png`),\r\n                      alt: item.alt,\r\n                      title: item.title\r\n                    }\r\n                  } />\r\n                )\r\n              }\r\n            </div>\r\n          </div>\r\n          <div className='ep-paper'>\r\n            <div className='file-label'>\r\n              <label className='responsive'>\r\n                导入文件\r\n                <input type='file' name='file' ref={this.fileSelector} multiple={false} accept='.xls,.xlsx'\r\n                  onChange={this.upload} onClick={e => e.target.value = null} />\r\n              </label>\r\n              <span className='responsive' onClick={Store.request('excel/loadout')}>导出文件</span>\r\n            </div>\r\n            <div>\r\n              {editers}\r\n              <div title='添加一道新题目' className='responsive ep-add-quiz' onClick={this.add}>\r\n                <img src={require('../../assets/add-char.png')} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n\r\n  }\r\n}\r\n\r\nexport default EditPaper\r\n"]},"metadata":{},"sourceType":"module"}