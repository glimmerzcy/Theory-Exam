{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\sunli\\\\Documents\\\\GitHub\\\\Theory-Exam\\\\code\\\\client\\\\src\\\\components\\\\PaperConfig\\\\index.jsx\",\n    _class;\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport Store from '../../utils/Store';\nimport '../../utils/InnerWindow/InnerWindow';\nimport './index.css';\n\nvar onError =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(msg) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return window.closeIW();\n\n          case 2:\n            window.showModal({\n              view: React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 12\n                },\n                __self: this\n              }, \"\\u4FDD\\u5B58\\u5931\\u8D25\"), React.createElement(\"p\", {\n                style: {\n                  color: 'red'\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 13\n                },\n                __self: this\n              }, msg || '不允许为空')),\n              onConfirm: function onConfirm() {\n                return window.showView(React.createElement(CM, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 15\n                  },\n                  __self: this\n                }));\n              }\n            });\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function onError(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar CM = observer(_class =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CM, _React$Component);\n\n  function CM(props) {\n    var _this;\n\n    _classCallCheck(this, CM);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CM).call(this, props));\n    _this.config = {\n      'time-limit': {\n        check: function check(v) {\n          return v < 240 && v > 0;\n        },\n        placeholder: '请输入0<x<240的数字'\n      },\n      'max-times': {\n        check: function check(v) {\n          return v < 100 && v > 0;\n        },\n        placeholder: '请输入0<x<100数字'\n      },\n      'min-score': {\n        check: function check() {\n          return true;\n        },\n        placeholder: '请输入'\n      },\n      'date-from': {\n        check: function check() {\n          return true;\n        },\n        placeholder: '请输入'\n      },\n      'date-to': {\n        check: function check() {\n          return true;\n        },\n        placeholder: '请输入'\n      },\n      'title': {\n        check: function check() {\n          return true;\n        },\n        placeholder: '试卷名称不能为空'\n      },\n      'tip': {\n        check: function check() {\n          return true;\n        },\n        placeholder: '无'\n      },\n      'aim': {\n        check: function check() {\n          return true;\n        },\n        placeholder: ''\n      }\n    };\n\n    _this.setClass = function (key) {\n      var isNum = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return {\n        key: key,\n        onChange: _this.onInput(key),\n        value: _this.state[key],\n        placeholder: _this.config[key].placeholder,\n        onKeyPress: function onKeyPress(e) {\n          var char = e.which || e.keyCode;\n          if (isNum && (char < 48 || char > 75)) e.preventDefault();\n        }\n      };\n    };\n\n    _this.onInput = function (key) {\n      return function (e) {\n        var value = e.target.value;\n        if (_this.state[key] === value) return;\n\n        var _assertThisInitialize = _assertThisInitialized(_assertThisInitialized(_this)),\n            state = _assertThisInitialize.state;\n\n        state[key] = _this.config[key].check(value) ? value : '';\n\n        _this.setState(state);\n      };\n    };\n\n    _this.close = function () {\n      _this.setState(_objectSpread({}, Store.infoList.paper.head));\n\n      window.closeIW();\n    };\n\n    _this.submit =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var keys, _i, _keys, key, onConfirm;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              //submit check will be done at here\n              Store.infoList.paper.head = _objectSpread({}, _this.state);\n              keys = ['title', 'time-limit', 'max-times', 'date-from', 'date-to'];\n              _i = 0, _keys = keys;\n\n            case 3:\n              if (!(_i < _keys.length)) {\n                _context2.next = 11;\n                break;\n              }\n\n              key = _keys[_i];\n\n              if (!(_this.state[key] === '')) {\n                _context2.next = 8;\n                break;\n              }\n\n              onError();\n              return _context2.abrupt(\"return\");\n\n            case 8:\n              _i++;\n              _context2.next = 3;\n              break;\n\n            case 11:\n              if (!(new Date(_this.state['date-from']) >= new Date(_this.state['date-to']))) {\n                _context2.next = 14;\n                break;\n              }\n\n              onError('不允许结束日期早于开始日期');\n              return _context2.abrupt(\"return\");\n\n            case 14:\n              onConfirm = _this.props.onConfirm;\n              onConfirm && onConfirm();\n              window.closeIW();\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.state = _objectSpread({}, Store.infoList.paper.head);\n    return _this;\n  }\n\n  _createClass(CM, [{\n    key: \"render\",\n    value: function render() {\n      var setClass = this.setClass;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"input\", Object.assign({\n        className: \"ep-ip-title\",\n        minLength: \"1\",\n        maxLength: \"20\"\n      }, setClass('title'), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row aside ep-ip-inner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"\\u65F6\\u9650(min)\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"\\u6700\\u5927\\u8003\\u8BD5\\u6B21\\u6570\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"\\u53CA\\u683C\\u5206\\u6570\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"\\u65F6\\u95F4\\u8303\\u56F4\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"\\u81F3\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"\\u8003\\u524D\\u63D0\\u793A\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"\\u8003\\u8BD5\\u8303\\u56F4\")), React.createElement(\"div\", {\n        className: \"column aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"input\", Object.assign({}, setClass('time-limit', true), {\n        type: \"number\",\n        min: 1,\n        max: 240,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(\"input\", Object.assign({}, setClass('max-times', true), {\n        type: \"number\",\n        min: 1,\n        max: Math.pow(10, 3),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(\"input\", Object.assign({}, setClass('min-score', true), {\n        disabled: true,\n        defaultValue: \"60\",\n        type: \"number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(\"input\", Object.assign({}, setClass('date-from'), {\n        max: this.state['date-to'],\n        type: \"datetime-local\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(\"input\", Object.assign({}, setClass('date-to'), {\n        min: this.state['date-from'],\n        type: \"datetime-local\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), React.createElement(\"input\", Object.assign({}, setClass('tip'), {\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })), React.createElement(\"select\", Object.assign({}, setClass('aim'), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"\\u6821\\u7EA7\"), React.createElement(\"option\", {\n        value: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"\\u9662\\u7EA7\"), React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\u5C0F\\u578B\"))))), React.createElement(\"p\", {\n        className: \"row around\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"responsive iw-bn iw-confirm\",\n        onClick: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"\\u4FDD\\u5B58\\u8BBE\\u7F6E\"), React.createElement(\"div\", {\n        className: \"responsive iw-bn iw-cancel\",\n        onClick: this.close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\")));\n    }\n  }]);\n\n  return CM;\n}(React.Component)) || _class;\n\nexport default CM;","map":{"version":3,"sources":["C:\\Users\\sunli\\Documents\\GitHub\\Theory-Exam\\code\\client\\src\\components\\PaperConfig\\index.jsx"],"names":["React","observer","Store","onError","msg","window","closeIW","showModal","view","color","onConfirm","showView","CM","props","config","check","v","placeholder","setClass","key","isNum","onChange","onInput","value","state","onKeyPress","e","char","which","keyCode","preventDefault","target","setState","close","infoList","paper","head","submit","keys","Date","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { observer } from 'mobx-react'\r\n\r\nimport Store from '../../utils/Store'\r\nimport '../../utils/InnerWindow/InnerWindow'\r\nimport './index.css'\r\n\r\nconst onError = async msg => {\r\n  await window.closeIW()\r\n  window.showModal({\r\n    view: <>\r\n      <h2>保存失败</h2>\r\n      <p style={{ color: 'red' }}>{msg || '不允许为空'}</p>\r\n    </>,\r\n    onConfirm: () => window.showView(<CM />)\r\n  })\r\n}\r\n\r\n@observer\r\nclass CM extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { ...Store.infoList.paper.head }\r\n  }\r\n  config = {\r\n    'time-limit': {\r\n      check: v => v < 240 && v > 0,\r\n      placeholder: '请输入0<x<240的数字'\r\n    },\r\n    'max-times': {\r\n      check: v => v < 100 && v > 0,\r\n      placeholder: '请输入0<x<100数字'\r\n    },\r\n    'min-score': {\r\n      check: () => true,\r\n      placeholder: '请输入'\r\n    },\r\n    'date-from': {\r\n      check: () => true,\r\n      placeholder: '请输入'\r\n    },\r\n    'date-to': {\r\n      check: () => true,\r\n      placeholder: '请输入'\r\n    },\r\n    'title': {\r\n      check: () => true,\r\n      placeholder: '试卷名称不能为空'\r\n    },\r\n    'tip': {\r\n      check: () => true,\r\n      placeholder: '无'\r\n    },\r\n    'aim': {\r\n      check: () => true,\r\n      placeholder: ''\r\n    }\r\n  }\r\n  setClass = (key, isNum = false) =>\r\n    ({\r\n      key,\r\n      onChange: this.onInput(key),\r\n      value: this.state[key],\r\n      placeholder: this.config[key].placeholder,\r\n      onKeyPress: e => {\r\n          let char = e.which || e.keyCode\r\n          if (isNum && (char < 48 || char > 75))\r\n            e.preventDefault()\r\n      }\r\n    })\r\n  onInput = key =>\r\n    e => {\r\n      let { value } = e.target\r\n      if (this.state[key] === value)\r\n        return\r\n      let { state } = this\r\n      state[key] = this.config[key].check(value) ? value : ''\r\n      this.setState(state)\r\n    }\r\n  close = () => {\r\n    this.setState({ ...Store.infoList.paper.head })\r\n    window.closeIW()\r\n  }\r\n  submit = async () => {\r\n    //submit check will be done at here\r\n    Store.infoList.paper.head = { ...this.state }\r\n    const keys = ['title', 'time-limit', 'max-times', 'date-from', 'date-to']\r\n    for (let key of keys)\r\n      if (this.state[key] === '') {\r\n        onError()\r\n        return\r\n      }\r\n    if (new Date(this.state['date-from']) >= new Date(this.state['date-to'])) {\r\n      onError('不允许结束日期早于开始日期')\r\n      return\r\n    }\r\n    let { onConfirm } = this.props\r\n    onConfirm && onConfirm()\r\n    window.closeIW()\r\n  }\r\n  render() {\r\n    let { setClass } = this\r\n    return (\r\n      <div>\r\n        <div>\r\n          <input className='ep-ip-title' minLength='1' maxLength='20' {...setClass('title')} />\r\n          <div className='row aside ep-ip-inner'>\r\n            <div className='column aside'>\r\n              <div>时限(min)</div>\r\n              <div>最大考试次数</div>\r\n              <div>及格分数</div>\r\n              <div>时间范围</div>\r\n              <div>至</div>\r\n              <div>考前提示</div>\r\n              <div>考试范围</div>\r\n            </div>\r\n            <div className='column aside'>\r\n              <input {...setClass('time-limit',true)} type='number' min={1} max={240} />\r\n              <input {...setClass('max-times',true)} type='number' min={1} max={10 ** 3} />\r\n              <input {...setClass('min-score',true)} disabled defaultValue='60' type='number' />\r\n              <input {...setClass('date-from')} max={this.state['date-to']} type='datetime-local' />\r\n              <input {...setClass('date-to')} min={this.state['date-from']} type='datetime-local' />\r\n              <input {...setClass('tip')}  type='text' />\r\n              <select {...setClass('aim')} >\r\n                  <option value='0'>校级</option>\r\n                  <option value='1'>院级</option>\r\n                  <option value='2'>小型</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p className='row around'>\r\n          <div className='responsive iw-bn iw-confirm' onClick={this.submit}>保存设置</div>\r\n          <div className='responsive iw-bn iw-cancel' onClick={this.close}>取消</div>\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CM\r\n"]},"metadata":{},"sourceType":"module"}